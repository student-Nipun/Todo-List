<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>

<body>
    <div class="container text-center">
        <h1>To Do List</h1>
        <input class="form-control" id="task" placeholder="Add ToDo">
        <button class="btn btn-primary mt-2 mb-3" onclick="add_todo()">Add ToDo</button>
        <div class="list-group" id="result"></div>
        <div class="btn btn-danger" onclick="clear_todo()">Clear ToDo</div>
    </div>

    <script>
        function add_todo() {
            let x = document.getElementById("task").value;
            const node = document.createElement('div');
            node.classList = "list-group-item list-group-item-primary mb-2";
            const textNode = document.createTextNode(x);
            node.appendChild(textNode);

            let b = document.createElement("button");
            b.className = "btn btn-danger";
            b.textContent = "Delete";
            b.style = "float:right";
            b.onclick = delete_todo;
            node.appendChild(b);

            let e = document.createElement("button");
            e.className = "btn btn-warning";
            e.textContent = "Edit";
            e.style = "float:right";
            e.onclick = edit_todo;
            node.appendChild(e);

            document.getElementById("result").appendChild(node);
            document.getElementById('task').value = "";
        }

        function clear_todo() {
            document.getElementById('result').innerHTML = "";
        }

        function delete_todo(e) {
            e.target.parentElement.remove();
        }

        function edit_todo(e) {
            const newdiv = document.createElement('div');
            newdiv.className = "container text-center mt-3"
            let i = document.createElement('input');
            i.className = "form-control";
            i.setAttribute("type", "text");
            newdiv.appendChild(i);
            let b1 = document.createElement("button");
            b1.className = "btn btn-success";
            b1.textContent = "Update";
            b1.onclick = edit_text;
            newdiv.appendChild(b1);

            let b2 = document.createElement("button");
            b2.className = "btn btn-danger";
            b2.textContent = "Close";
            b2.onclick = close_box;
            newdiv.appendChild(b2);
            e.target.parentElement.appendChild(newdiv);
        }

        function edit_text(e) {
            let y = e.target.parentElement.firstChild.value;
            const textnode1 = document.createTextNode(y);
            e.target.parentElement.parentElement.replaceChild(textnode1, e.target.parentElement.parentElement.firstChild)
            e.target.parentElement.remove();
        }

        function close_box(e) {
            e.target.parentElement.remove();
        }

    </script>

</body>

</html>